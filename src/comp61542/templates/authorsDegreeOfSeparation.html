{% extends "base.html" %}
{% block title %}{{ args.title }}{% endblock %}

{% block content %}

	<script type="text/javascript" src="{{ url_for('static', filename='sprint4_user_story_2_scripts/raphael-min.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='sprint4_user_story_2_scripts/dracula_graffle.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='sprint4_user_story_2_scripts/jquery-1.4.2.min.js') }}"></script>
	<script type="text/javascript" src="{{ url_for('static', filename='sprint4_user_story_2_scripts/dracula_graph.js') }}"></script>

<script type="text/javascript">
function getCoauthorsGraph() {
    var g = new Graph();
    {% set dictKeys=args.shortest_path.keys() %}
    {% for currKey in dictKeys %}
    	{% set currSource=currKey %}
    	{% for currDest in args.shortest_path[currKey] %}
    		g.addEdge("{{ currSource }}", "{{ currDest }}");
    	{% endfor %}
    {% endfor %}
    var layouter = new Graph.Layout.Spring(g);
    layouter.layout();
    var renderer = new Graph.Renderer.Raphael('graph_div', g, 400, 300);
    renderer.draw();
}
</script>

<h1>{{ args.title }}</h1>

<form name="input" action="/authorsDegreeOfSeparation" method="get" data-ajax="false">
Author A:
<select name="authorA">
	{% for author_name in args.author_names %}
	<option>{{ author_name }}</option>
	{% endfor %}
</select>
Author B:
<select name="authorB">
	{% for author_name in args.author_names %}
	<option>{{ author_name }}</option>
	{% endfor %}
</select>
<input type="submit" value="Submit">

</form>

<table>
  <thead>
    <tr>
    {% for column in args.columns %}
      <th>{{ column }}</th>
    {% endfor %}
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>{{ args.authorA }}</td>
      <td>{{ args.authorB }}</td>
      <td>{{ args.degree_of_separation }}</td>
    </tr>
  </tbody>
</table>

Shortest Path:
<button onclick="getCoauthorsGraph()">Get coauthors graph</button>
<div id="graph_div"></div>
{% endblock %}